{"ast":null,"code":"import _objectSpread from \"/Users/viraajreddi/Desktop/Firebase-auth-article/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport { functions } from \"firebase\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9WZB5N6ekNxyN3yGaUwjuBilvXItUv38\",\n  authDomain: \"fir-auth-article.firebaseapp.com\",\n  databaseURL: \"https://fir-auth-article.firebaseio.com\",\n  projectId: \"fir-auth-article\",\n  storageBucket: \"fir-auth-article.appspot.com\",\n  messagingSenderId: \"774252759419\",\n  appId: \"1:774252759419:web:e014ddfa3553a4832a15de\",\n  measurementId: \"G-77Z5WJ0SET\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nconst provider = new firebase.auth.GoogleAuthProvider();\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const email = user.email,\n          displayName = user.displayName,\n          photoURL = user.photoURL;\n\n    try {\n      await userRef.set(_objectSpread({\n        displayName,\n        email,\n        photoURL\n      }, additionalData));\n    } catch (error) {\n      console.error(\"Error creating user document\", error);\n    }\n  }\n\n  return getUserDocument(user.uid);\n};\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return _objectSpread({\n      uid\n    }, userDocument.data());\n  } catch (error) {\n    console.error(\"Error fetching user\", error);\n  }\n};","map":{"version":3,"sources":["/Users/viraajreddi/Desktop/Firebase-auth-article/src/firebase.js"],"names":["firebase","functions","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","auth","firestore","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","userRef","doc","uid","snapshot","get","exists","email","displayName","photoURL","set","error","console","getUserDocument","userDocument","data"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AACA,SAASC,SAAT,QAA0B,UAA1B;AAEA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,kCAFS;AAGrBC,EAAAA,WAAW,EAAE,yCAHQ;AAIrBC,EAAAA,SAAS,EAAE,kBAJU;AAKrBC,EAAAA,aAAa,EAAE,8BALM;AAMrBC,EAAAA,iBAAiB,EAAE,cANE;AAOrBC,EAAAA,KAAK,EAAE,2CAPc;AAQrBC,EAAAA,aAAa,EAAE;AARM,CAAvB,C,CAUA;;AACAV,QAAQ,CAACW,aAAT,CAAuBT,cAAvB;AAEA,OAAO,MAAMU,IAAI,GAAGZ,QAAQ,CAACY,IAAT,EAAb;AACP,OAAO,MAAMC,SAAS,GAAGb,QAAQ,CAACa,SAAT,EAAlB;AAEP,MAAMC,QAAQ,GAAG,IAAId,QAAQ,CAACY,IAAT,CAAcG,kBAAlB,EAAjB;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AACpCJ,EAAAA,IAAI,CAACK,eAAL,CAAqBH,QAArB;AACD,CAFM;AAIP,OAAO,MAAMI,oBAAoB,GAAG,OAAOC,IAAP,EAAaC,cAAb,KAAgC;AAClE,MAAI,CAACD,IAAL,EAAW;AAEX,QAAME,OAAO,GAAGR,SAAS,CAACS,GAAV,CAAe,SAAQH,IAAI,CAACI,GAAI,EAAhC,CAAhB;AACA,QAAMC,QAAQ,GAAG,MAAMH,OAAO,CAACI,GAAR,EAAvB;;AAEA,MAAI,CAACD,QAAQ,CAACE,MAAd,EAAsB;AAAA,UACZC,KADY,GACqBR,IADrB,CACZQ,KADY;AAAA,UACLC,WADK,GACqBT,IADrB,CACLS,WADK;AAAA,UACQC,QADR,GACqBV,IADrB,CACQU,QADR;;AAEpB,QAAI;AACF,YAAMR,OAAO,CAACS,GAAR;AACJF,QAAAA,WADI;AAEJD,QAAAA,KAFI;AAGJE,QAAAA;AAHI,SAIDT,cAJC,EAAN;AAMD,KAPD,CAOE,OAAOW,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;AACD;AACF;;AACD,SAAOE,eAAe,CAACd,IAAI,CAACI,GAAN,CAAtB;AACD,CApBM;;AAsBP,MAAMU,eAAe,GAAG,MAAMV,GAAN,IAAa;AACnC,MAAI,CAACA,GAAL,EAAU,OAAO,IAAP;;AACV,MAAI;AACF,UAAMW,YAAY,GAAG,MAAMrB,SAAS,CAACS,GAAV,CAAe,SAAQC,GAAI,EAA3B,EAA8BE,GAA9B,EAA3B;AAEA;AACEF,MAAAA;AADF,OAEKW,YAAY,CAACC,IAAb,EAFL;AAID,GAPD,CAOE,OAAOJ,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,qBAAd,EAAqCA,KAArC;AACD;AACF,CAZD","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport { functions } from \"firebase\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA9WZB5N6ekNxyN3yGaUwjuBilvXItUv38\",\n  authDomain: \"fir-auth-article.firebaseapp.com\",\n  databaseURL: \"https://fir-auth-article.firebaseio.com\",\n  projectId: \"fir-auth-article\",\n  storageBucket: \"fir-auth-article.appspot.com\",\n  messagingSenderId: \"774252759419\",\n  appId: \"1:774252759419:web:e014ddfa3553a4832a15de\",\n  measurementId: \"G-77Z5WJ0SET\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\n\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n\n  if (!snapshot.exists) {\n    const { email, displayName, photoURL } = user;\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        photoURL,\n        ...additionalData\n      });\n    } catch (error) {\n      console.error(\"Error creating user document\", error);\n    }\n  }\n  return getUserDocument(user.uid);\n};\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n\n    return {\n      uid,\n      ...userDocument.data()\n    };\n  } catch (error) {\n    console.error(\"Error fetching user\", error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}